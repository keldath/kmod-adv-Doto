ReligionMod (NEW) (CvPlayer.cpp, CvPlayer.h, CvPlayerAI.cpp, CvGame.cpp, CvTeam.cpp, CvUnit.cpp, CvUnitAI.cpp)

Adds the following restrictions: a player cannot found more than two religions, and a city cannot have more than four religions in it. If a player is the first to a third religion-founding tech, he will simply leave the religion for someone else to found and proceed as normal. A missionary cannot spread a religion to a full foreign city (ie no foreign inquisitions). If a missionary attempts to spread a 5th religion to one of his own cities, and doesn't randomly fail as he normally can, his religion will override/replace one of the existing ones at random (with all related buildings being immediately torn down), subject to one condition: if the player also owns the holy city for a religion that is present (or the target city itself is a holy city), that religion is immune to removal and one of the others will be chosen instead. If all 4 religions in the target city are protected, spreading in that city is not possible. (Having 4 protected religions is possible by conquering other players' holy cities; there is no cap on acquiring them this way.) No longer checks with the Python function that can override spread validities if it exists.

This mod replaces my previous one reducing gold income from shrines (by up to 50% based on world size), which were overpowered when a single player could get 4 to 7 of them just by having a high-tech-rate early game. It removes the mess of spreading that many religions to all of your cities to get all the shrine money, and reins in the runaway extra happiness (up to +14) from having lots of temples and being on Free Religion, which was very difficult to deal with from a balance standpoint.

Also fixes a bug where barbarian players could found religions. This was extremely unlikely in vanilla (though not technically impossible if the barbs had a lot of cities), but under my system if one or more players who had already founded their two religions early then also got the founding techs for later religions before someone else did, the barbs would start to research these techs passively at the normal rate and potentially get them fast enough.

Further, blocks the AI from performing domestic inquisitions (spreading a 5th religion to a full city) if they neither have the holy city for the new religion nor are using it as a state religion. I'm not actually sure if they would or not, but this guarantees they will not do anything stupid if they have the ability to make missionaries for 5 or more religions but only control 3 or fewer holy cities (as it would then be possible to swap out replaceable religions with other replaceable religions endlessly, wasting production time both on missionaries and on rebuilding purged religious buildings). This restriction does not apply to human players.

Changes the odds of success for a missionary spreading a religion to 100% for own/teammate cities and 80% for other cities, minus 10% per existing religion there. Under the above system the lowest domestic spread chance is thus 60% and the lowest foreign spread chance is 50%. (This is much simpler, and better, than before imo, where the odds would range from 100% to 40% domestic and 50% to 20% foreign depending on the number of existing religions there; constant missionary failure is annoying and unnecessary.)
